<div class="page">
  <div class="header">
    <h2>Tarjetas de Crédito</h2>
    <p class="subtitle">Gestiona tus tarjetas de crédito</p>
    <button class="btn btn-primary add-btn" (click)="agregarTarjeta()">
      <span class="btn-icon">➕</span>
      <span class="btn-text">Agregar Tarjeta</span>
    </button>
  </div>

  <!-- Listado de tarjetas -->
  <section class="content-card">
    <h3 class="card-title">Mis Tarjetas</h3>
    
    <!-- Loading state -->
    <div *ngIf="loading" class="loading-state">
      <div class="loading-spinner"></div>
      <div class="loading-text">Cargando tarjetas...</div>
    </div>

    <!-- Empty state -->
    <div *ngIf="!loading && tarjetas.length === 0" class="empty-state">
      <div class="empty-icon">💳</div>
      <div class="empty-text">No hay tarjetas registradas</div>
      <div class="empty-subtext">¡Agrega tu primera tarjeta para comenzar!</div>
    </div>

    <!-- Lista de tarjetas -->
    <div *ngIf="!loading && tarjetas.length > 0" class="tarjetas-grid">
      <div class="tarjeta-card" *ngFor="let tarjeta of tarjetas">
        <div class="tarjeta-header">
          <div class="tarjeta-icon">💳</div>
          <div class="tarjeta-actions">
            <button class="btn-action btn-edit" (click)="editarTarjeta(tarjeta)" title="Editar">
              <span class="action-icon">✏️</span>
            </button>
            <button class="btn-action btn-delete" (click)="eliminarTarjeta(tarjeta)" title="Eliminar">
              <span class="action-icon">🗑️</span>
            </button>
          </div>
        </div>
        
        <div class="tarjeta-content">
          <div class="tarjeta-nombre">{{ tarjeta.nombre }}</div>
          <div class="tarjeta-banco">{{ tarjeta.banco }}</div>
          
          <div class="tarjeta-details">
            <div class="detail-item">
              <span class="detail-label">Límite:</span>
              <span class="detail-value">{{ tarjeta.limite | number:'1.0-0' }}</span>
            </div>
            
            <div class="detail-item" *ngIf="tarjeta.ultimosDigitos">
              <span class="detail-label">Últimos dígitos:</span>
              <span class="detail-value">****{{ tarjeta.ultimosDigitos }}</span>
            </div>
            
            <div class="detail-item">
              <span class="detail-label">Día de cierre:</span>
              <span class="detail-value">{{ tarjeta.diaCierre }}</span>
            </div>
            
            <div class="detail-item">
              <span class="detail-label">Día de vencimiento:</span>
              <span class="detail-value">{{ tarjeta.diaVencimiento }}</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
</div>

<!-- Modal para agregar/editar tarjeta -->
<app-tarjeta-dialog 
  *ngIf="mostrarModal"
  [tarjeta]="tarjetaSeleccionada"
  [esEdicion]="esEdicion"
  (guardarTarjeta)="onGuardarTarjeta($event)"
  (cancelarDialog)="cerrarModal()"
></app-tarjeta-dialog>

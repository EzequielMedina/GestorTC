<div class="alert-banner-container" *ngIf="alertasNoVistas.length > 0">
  <!-- Vista colapsada: solo icono con contador -->
  <div class="alert-banner-collapsed" *ngIf="colapsado" (click)="toggleColapsar($event)">
    <mat-icon class="notification-icon">notifications</mat-icon>
    <span class="notification-badge">{{ alertasNoVistas.length }}</span>
  </div>

  <!-- Vista expandida: banner completo -->
  <div *ngIf="!colapsado" class="alert-banner-expanded">
    <div class="alert-banner-header">
      <div class="alert-banner-title">
        <mat-icon>notifications</mat-icon>
        <span>Alertas ({{ alertasNoVistas.length }})</span>
      </div>
      <div class="header-actions">
        <button mat-icon-button (click)="toggleColapsar($event)" class="toggle-btn" type="button" title="Ocultar">
          <mat-icon>close</mat-icon>
        </button>
      </div>
    </div>

    <div class="alertas-list" *ngIf="mostrarTodas || alertasNoVistas.length > 0">
    <div 
      *ngFor="let alerta of alertas" 
      class="alerta-item"
      [class]="getClasePorPrioridad(alerta.prioridad)"
      [class.vista]="alerta.vista"
    >
      <div class="alerta-icon" [style.color]="getColorPorPrioridad(alerta.prioridad)">
        <mat-icon>{{ getIconoPorTipo(alerta.tipo) }}</mat-icon>
      </div>
      
      <div class="alerta-content" (click)="navegarDesdeAlerta(alerta)">
        <div class="alerta-titulo">{{ alerta.titulo }}</div>
        <div class="alerta-mensaje">{{ alerta.mensaje }}</div>
      </div>

      <div class="alerta-actions">
        <button 
          mat-icon-button 
          (click)="marcarComoVista(alerta, $event)"
          *ngIf="!alerta.vista"
          class="action-btn"
          title="Marcar como vista"
          type="button"
        >
          <mat-icon>check</mat-icon>
        </button>
        <button 
          mat-icon-button 
          (click)="cerrarAlerta(alerta, $event)"
          class="action-btn"
          title="Cerrar"
          type="button"
        >
          <mat-icon>close</mat-icon>
        </button>
      </div>
    </div>
  </div>
  </div>
</div>

